<!doctype html>
<html lang="es-ES" prefix="og: https://ogp.me/ns#">
	<head>
		<!-- Assets -->
		<meta charset="utf-8">
		<meta name="robots" content="all">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<!-- Title -->
		<title>Profesionaliza tus deploys con Deployer by @jjpeleato</title>
		<!-- Information -->
		<meta name="description" content="Deployer, la herramienta de despliegues para PHP by @jjpeleato">
		<meta name="author" content="@jjpeleato">
		<!-- Datetime -->
		<meta name="content_origin" content="2023-05-10">
		<meta name="content_updated" content="2023-05-10">
		<meta name="minor_updates" content="2023-05-10">
		<!-- Social media -->
		<meta property="og:locale" content="en_GB">
		<meta property="og:type" content="website">
		<meta property="og:site_name" content="Profesionaliza tus deploys con Deployer">
		<meta property="og:title" content="Profesionaliza tus deploys con Deployer">
		<meta property="og:description" content="Deployer, la herramienta de despliegues para PHP">
		<meta property="og:url" content="https://jjpeleato.com/courses/deployer/">
		<meta property="og:image" content="https://jjpeleato.com/courses/deployer/image-share.png">
		<meta name="twitter:card" content="summary">
		<meta name="twitter:title" content="Profesionaliza tus deploys con Deployer">
		<meta name="twitter:description" content="Deployer, la herramienta de despliegues para PHP">
		<meta name="twitter:site" content="@jjpeleato">
		<meta name="twitter:creator" content="@jjpeleato">
		<meta name="twitter:image" content="https://jjpeleato.com/courses/deployer/image-share.png">
		<!-- Geolocation -->
		<meta name="geo.region" content="ES-AR">
		<meta name="geo.placename" content="Huesca">
		<meta name="geo.position" content="42.131845;-0.407806">
		<meta name="ICBM" content="42.131845, -0.407806">
		<!-- Icons: .png or .ico -->
		<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
		<!-- Assets CSS -->
		<link rel="stylesheet" href="assets/css/vendor/reset.css">
		<link rel="stylesheet" href="assets/css/vendor/reveal.css">
		<link rel="stylesheet" href="assets/css/vendor/white.css" id="theme">
		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="assets/css/vendor/monokai.css">
		<!-- Fontawesome-->
		<link href="assets/fontawesome/css/fontawesome.css" rel="stylesheet">
		<link href="assets/fontawesome/css/brands.css" rel="stylesheet">
		<link href="assets/fontawesome/css/solid.css" rel="stylesheet">
		<!-- Plus CSS-->
		<link rel="stylesheet" href="assets/css/style.css">
	</head>
	<body oncontextmenu="return false" onkeydown="return false">
		<div class="reveal">
			<div class="slides">
				<!-- Workshop presentation -->
				<section>
					<section>
						<h2>Profesionaliza tus deploys</h2>
						<h1>Deployer</h1>
						<blockquote>"Piensa en la automatización"</blockquote>
						<p><i class="fa-solid fa-link"></i> <a rel="nofollow" href="https://bit.ly/3sHoPSF" target="_blank" title="Deployer, la herramienta de despliegues para PHP">https://bit.ly/3sHoPSF</a></p>
					</section>
					<section>
						<p class="h4">¡Hola y bienvenid@s!</p>
						<p>Mi nombre es <strong>José J. Peleato Pradel</strong>.</p>
						<p><small>by <a href="https://www.jjpeleato.com/" target="_blank" title="By JJPeleato">jjpeleato.com</a></small></p>
					</section>
				</section>

				<!-- Disclaimer -->
				<section>
					<section>
						<p class="h2">Disclaimer</p>
					</section>
					<section>
						<p>En la presente sesión vamos a conocer que es <strong>Deployer v6.8.0</strong>, conocer cómo nos puede ayudar en la <strong>automatización de procesos</strong>, cómo podemos definir una metodología en nuestro <strong>flujo de despliegues</strong> y además, conoceremos cómo implementar esta herramienta con WordPress.</p>
					</section>
					<section>
						<p>Momento de reflexión, <strong>Deployer</strong> es una herramienta más y cómo todo aparejo, debemos valorar en que nos puede ayudar y si lo puede hacer =)</p>
					</section>
				</section>

				<!-- What is Deployer? -->
				<section>
					<section>
						<h2>¿Qué es Deployer?</h2>
						<img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQzIiBoZWlnaHQ9IjE5MyIgdmlld0JveD0iMCAwIDI0MyAxOTMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsPSIjMENGIiBkPSJNMjQyLjc4MS4zOUwuMjA3IDEwMS42NTNsODMuNjA2IDIxLjc5eiIvPjxwYXRoIGZpbGw9IiMwMEIzRTAiIGQ9Ik05Ny41NTUgMTg2LjM2M2wxNC4xMjktNTAuNTQzTDI0Mi43OC4zOSA4My44MTIgMTIzLjQ0MmwxMy43NDMgNjIuOTIyIi8+PHBhdGggZmlsbD0iIzAwODRBNiIgZD0iTTk3LjU1NSAxODYuMzYzbDMzLjc3My0zOS4xMTMtMTkuNjQ0LTExLjQzLTE0LjEzIDUwLjU0MyIvPjxwYXRoIGZpbGw9IiMwQ0YiIGQ9Ik0xMzEuMzI4IDE0Ny4yNWw3OC40ODQgNDUuNjY0TDI0Mi43ODIuMzkxIDExMS42ODMgMTM1LjgybDE5LjY0NCAxMS40MjkiLz48L2c+PC9zdmc+"
							 width="auto"
							 height="75"
							 title="Deployer"
							 alt="Deployer">
						<p><small><i class="fa fa-paper-plane"></i> <a rel="nofollow" href="https://deployer.org/" target="_blank" title="Deployer">Página oficial</a> | <i class="fas fa-book"></i> <a rel="nofollow" href="https://deployer.org/docs/6.x/getting-started" target="_blank" title="Documentación Deployer">Documentación</a> | <i class="fab fa-github"></i> <a rel="nofollow" href="https://github.com/deployphp/deployer" target="_blank" title="Deployer GitHub">GitHub</a></small></p>
					</section>
					<section>
						<blockquote>«A deployment tool written in PHP with support for popular frameworks out of the box» – <strong>Deployer</strong>.</blockquote>
					</section>
					<section>
						<p><strong>Deployer</strong> es una <strong>herramienta construida en PHP</strong> para el desarrollo web, nos permite la <strong>automatización de despliegues con múltiples tareas (cualquier tarea) en diferentes entornos (multiple staging environments)</strong>, todo ello, a través de un único archivo de configuración.</p>
					</section>
					<section>
						<h4>¿Por qué utilizar Deployer?</h4>
						<p>El despliegue de aplicaciones consiste en todas las actividades que hacen que un sistema de software esté disponible para su uso.</p>
					</section>
					<section>
						<p>Normalmente, se realizan tareas repetitivas para subir al servidor la última versión estable del código, ya sea a través la instalación de dependencias de Composer o paquetes NPM, copilar SASS, minificar JS, etc.</p>
						<p>Acciones que de forma manual o semi manual hacen que invirtamos <strong>tiempo no productivo</strong>.</p>
					</section>
					<section>
						<p>Y es ahí, dónde <strong>Deployer</strong> nos puede ayudar, creando la <strong>automatización de procesos</strong>, de manera que se <strong>reduzca el tiempo necesario</strong> para hacer llegar las nuevas funcionalidades o correcciones a los usuarios finales y se minimice los errores humanos.</p>
					</section>
					<section>
						<p class="h4">¿Como funciona?</p>
						<p>Un mecanismo que <strong>combina</strong> el uso de <strong>Git</strong> (con el repositorio especificado) y <strong>SSH</strong>.</p>
						<p>Facilita una de las acciones más habituales en el ciclo de vida del software, los despliegues, pudiendo así, tener un control total de que se publica a demo (alpha), preproducción (beta) o producción.</p>
					</section>
					<section>
						<p>Además, en caso de error en la versión liberada, nos <strong>permite poder deshacer el último despliegue</strong> de una forma rápida y segura.</p>
					</section>
					<section>
						<p class="h4">Recipes</p>
						<p>Las <a rel="nofollow" href="https://github.com/deployphp/deployer/tree/master/recipe" target="_blank" title="Recipes Deployer"><strong>recipes</strong></a> son la abstracción de más alto nivel de <strong>Deployer</strong>, <strong>configuraciones predeterminadas de frameworks.</strong></p>
						<p>Dicho de otra forma, puntos de partida con las necesidades básicas para proyectos de Software, cómo por ejemplo: Symfony, Laravel, WordPress, etc.</p>
					</section>
					<section>
						<p class="h4">Estructura directorios</p>
						<table>
							<thead>
							<tr>
								<th>Directorio</th>
								<th>Descripción</th>
							</tr>
							</thead>
							<tbody>
							<tr>
								<td><strong>releases</strong></td>
								<td>Carpeta donde se guarda el código desplegado. Por defecto Deployer guarda los últimos 5 despliegues realizados en carpetas numeradas (1, 2, 3, etc.) de manera que el código correspondiente al primer despliegue se encontrará en la carpeta /releases/1, el del siguiente en /releases/2 y así sucesivamente.</td>
							</tr>
							<tr>
								<td><strong>current</strong></td>
								<td>Enlace simbólico a la carpeta que contiene el último despliegue y por tanto la versión más actualizada de nuestra aplicación. Esta carpeta será la que deberemos configurar como root en el servidor web.</td>
							</tr>
							<tr>
								<td><strong>shared</strong></td>
								<td>Ficheros y directorios compartidos. Cada una de las carpetas en releases contendrá enlaces simbólicos a los directorios y ficheros compartidos en shared.</td>
							</tr>
							</tbody>
						</table>
					</section>
					<section>
						<p>Si realizamos otro despliegue con <strong>Deployer</strong> veremos que se coloca en la carpeta /releases/2 y actualiza el enlace simbólico current para que apunte a esta carpeta.</p>
						<p>Esto nos permite realizar despliegues sin necesidad de parar la aplicación y mantener las releases anteriores en caso de que algo vaya mal y queramos hacer un rollback.</p>
					</section>
					<section>
						<p class="h4">Hooks</p>
						<p>En <strong>Deployer</strong> existen dos ganchos donde encolar la ejecución de nuestras tareas personalizadas: <strong>before</strong> y <strong>after</strong>.</p>
						<pre><code>before('deploy', 'slack:notify');
after('deploy:failed', 'slack:notify:failure');</code></pre>
					</section>
				</section>

				<!-- Installation -->
				<section>
					<section>
						<p class="h2">Instalación</p>
					</section>
					<section>
						<p class="h4">Requisitos</p>
						<ul>
							<li>require: PHP (cli) >7.2.*</li>
							<li>require-dev: Composer</li>
						</ul>
					</section>
					<section>
						<p class="h4">Global</p>
						<pre><code>curl -LO https://deployer.org/deployer.phar
mv deployer.phar /usr/local/bin/dep
chmod +x /usr/local/bin/dep</code></pre>
					</section>
					<section>
						<p class="h4">Composer</p>
						<p><small><i class="fas fa-link"></i> <a rel="nofollow" href="https://packagist.org/packages/deployer/deployer" target="_blank" title="Deployer packagist">Deployer on Packagist</a></small></p>
						<pre><code>composer require deployer/deployer --dev</code></pre>
					</section>
					<section>
						<p class="h4">Lando + Composer</p>
						<pre><code>lando composer require deployer/deployer --dev</code></pre>
						<pre><code># .lando.yml
# See: https://docs.devwithlando.io/config/tooling.html
tooling:
  dep:
    service: appserver
    desription: run deployer commands
    cmd:
      - "vendor/bin/dep"</code></pre>
					</section>
					<section>
						<p>Es muy importante saber que <strong>Deployer</strong> ejecuta todas las tareas en el lado del servidor vía SSH, eso significa, que sí en nuestro archivo tenemos tareas que dependen de software cómo NPM, Yarn, Composer, etc, deberán estar instalados en el servidor remoto.</p>
					</section>
				</section>

				<!-- Commands -->
				<section>
					<section>
						<p class="h2">Comandos</p>
					</section>
					<section>
						<table>
							<thead>
							<tr>
								<th>Comando</th>
								<th>Descripción</th>
							</tr>
							</thead>
							<tbody>
							<tr>
								<td><strong>dep [command]</strong></td>
								<td>Ejecutar Deployer de forma global.</td>
							</tr>
							<tr>
								<td><strong>php vendor/bin/dep [command]</strong></td>
								<td>Ejecutar Deployer con instalación a través de Composer.</td>
							</tr>
							<tr>
								<td><strong>lando dep [command]</strong></td>
								<td>Ejecutar Deployer a través de Lando y Composer.</td>
							</tr>
							</tbody>
						</table>
						<p><small>Todos los comandos se pueden ejecutar en modo "verbose": -v, -vv o -vvv</small></p>
					</section>
					<section>
						<table>
							<thead>
							<tr>
								<th>Comando</th>
								<th>Descripción</th>
							</tr>
							</thead>
							<tbody>
							<tr>
								<td><strong>lando dep init</strong></td>
								<td>Inicializa y crea el archivo deploy.php.</td>
							</tr>
							<tr>
								<td><strong>lando dep list</strong></td>
								<td>Listado de todos los comandos y opciones de Deployer.</td>
							</tr>
							<tr>
								<td><strong>lando dep deploy [stage]</strong></td>
								<td>Desplegar proyecto según entorno declarado.</td>
							</tr>
							<tr>
								<td><strong>lando dep rollback [stage]</strong></td>
								<td>Revertir último despliegue a la versión anterior.</td>
							</tr>
							<tr>
								<td><strong>lando dep cleanup [stage]</strong></td>
								<td>Limpiar versiones antiguas en el servidor remoto.</td>
							</tr>
							<tr>
								<td><strong>lando dep run "command" --stage [stage]</strong></td>
								<td>Ejecuta el comando especificado en el servidor remoto.</td>
							</tr>
							<tr>
								<td><strong>lando dep ssh [stage]</strong></td>
								<td>Conectar vía SSH al servidor remoto.</td>
							</tr>
							<tr>
								<td><strong>lando dep [task]</strong></td>
								<td>Ejecutar tarea especificada en el archivo deploy.php.</td>
							</tr>
							</tbody>
						</table>
					</section>
				</section>

				<!-- Are you OK? -->
				<section>
					<section>
						<p class="h2">¿Tod@s bien?</p>
						<p><img src="https://media.giphy.com/media/kEKcOWl8RMLde/giphy.gif" width="auto" height="250" title="Docker" alt="Docker"></p>
					</section>
				</section>

				<!-- Code examples -->
				<section>
					<section>
						<p class="h2">Ejemplo</p>
						<p><i class="fab fa-github"></i> <a rel="nofollow" href="https://bit.ly/42VwTlb" target="_blank" title="Short URL">https://bit.ly/42VwTlb</a></p>
					</section>
				</section>

				<!-- Future! -->
				<section>
					<section>
						<p class="h2">En el futuro</p>
					</section>
					<section>
						<p><strong>Deployer</strong> es un proyecto con un gran respaldo en la comunidad GitHub, actualmente están trabajando en la nueva versión 7.0.0, dónde implementa un nuevo sistema de archivo de configuración basado en Yaml (.yaml o .yml).</p>
						<p><i class="fab fa-github"></i> <a rel="nofollow" href="https://bit.ly/453fLvH" target="_blank" title="Deployer v7.0.0">https://bit.ly/453fLvH</a></p>
					</section>
				</section>

				<!-- Alternatives -->
				<section>
					<section>
						<p class="h2">Alternativas</p>
					</section>
					<section>
						<ul>
							<li><a rel="nofollow" href="https://automate-deployer.com/" target="_blank" title="Automate deployer">Automate deployer</a></li>
							<li><a rel="nofollow" href="https://capistranorb.com/" target="_blank" title="Capistrano">Capistrano</a></li>
							<li><a rel="nofollow" href="https://www.magephp.com/" target="_blank" title="Magallanes">Magallanes</a></li>
							<li><a rel="nofollow" href="https://surge.sh/" target="_blank" title="Surge">Surge</a></li>
							<li><a rel="nofollow" href="https://gist.github.com/jjpeleato/cb495dc037a5dfcd05b79208f8fc3941" target="_blank" title="Shell script (rsync)">Shell script (rsync)</a></li>
							<li><a rel="nofollow" href="https://www.jenkins.io/" target="_blank" title="Jenkins">Jenkins</a></li>
							<li><a rel="nofollow" href="https://docs.gitlab.com/ee/ci/" target="_blank" title="GitLab CI/CD" >GitLab CI/CD</a></li>
							<li><a rel="nofollow" href="https://docs.github.com/en/actions/guides/about-continuous-integration" target="_blank" title="GitHub Actions">GitHub Actions</a></li>
						</ul>
					</section>
				</section>

				<!-- Thank you -->
				<section>
					<p class="h4">¡FIN!</p>
					<p>Simplemente, GRACIAS</p>
					<img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="assets/img/merci.gif" title="Gracias" alt="Gracias">
				</section>
			</div>
		</div>
		<!-- Assets JS -->
		<script src="assets/js/vendor/reveal.js"></script>
		<script src="assets/js/vendor/notes.js"></script>
		<script src="assets/js/vendor/markdown.js"></script>
		<script src="assets/js/vendor/highlight.js"></script>
		<script src="assets/js/vendor/zoom.js"></script>
		<script src="assets/js/custom.js"></script>
	</body>
</html>
